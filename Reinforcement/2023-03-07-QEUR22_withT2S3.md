---
title: QEUR22_withT2S3:　T法(2)とカタストロフ
date: 2023-03-07
tags: ["QEUシステム", "メトリックス", "Python言語", "T法(2)", "REWARD", "強化学習"]
excerpt: T法(2)をテクノメトリックスとして使った強化学習
---

## QEUR22_withT2S3:　T法(2)とカタストロフ

## ～　T法について、見る角度を変えてみましょう　～

### ・・・　前回のつづきです　・・・

QEU:FOUNDER ： “だからPrompt Engineeringって、すごい未来がある分野だと思います。とうとうQEUシステムも「新しい旗（↓）」を上げることになるのかなぁ。”

![imageJRL2-4-1](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-1.jpg)

QEU:FOUNDER ： “そうして足元をみたら、TMってT法(2)とRT法以外はぜんぜんイケていないんだよねぇ・・・。”

![imageJRL2-4-2](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-2.jpg)

D先生 ： “オッサン・・・。画像の一部分かけたモザイクがさらにひどくなっています！！”

QEU:FOUNDER ： “これの方がより正確かなと思って・・・（笑）。いままでT法（２）はあまり使われていなかったですね。ここで、ちょっとT法(2)をレビューしましょう。回帰分析みたいなもんです。あとで頭をちょっとリセットしますが・・・。”

D先生 ： “ああ・・・、また混乱しやすい説明を・・・。”

![imageJRL2-4-3](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-3.jpg)

QEU:FOUNDER ： “このブログを見ると、T法の原理がわかりやすいです。”

D先生 ： “これはわかりやすい！！品質工学って、そもそも**「計測には真値はない」**こと、及び**「計測器をどのように評価するか」**に対応することから始まったんでしたよね。”

QEU:FOUNDER ： “小生のT法の対する理解は「MTA法の発展形」だと思うがね。・・・まあ、いいや。そして、回帰に当たってY(M)と複数のXsの関係グラフを項目毎にバラバラに作成します。”

![imageJRL2-4-4](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-4.jpg)

QEU:FOUNDER ： “あっ、ここまで説明に熱中していて忘れていました。この番組は**「高齢者によるイノベーション」**です。 この項目別グラフが0点比例式に近いがどうかは、回帰の良し悪しにとって重要な目安になります。最後に、それを2つのメトリックスに変換し、これがβ（感度）とη（SN比真数）です。”

![imageJRL2-4-5](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-5.jpg)

D先生 ： “SN比（真数）の解釈で単位空間が中間になるT法(1)と単位空間が端になるT法(2)が分かれます。ちなみに、上図でT法(1)のSN比はパラメタ設計で使われるSN比の定義です。ただし、単位空間が中央とか端とか、普通、その意味がわからないと思います。”

**（統計的最小二乗法回帰計算の場合）**

![imageJRL2-4-6](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-6.jpg)

**（T法回帰計算でバラツキの中間データを単位空間にした場合）**

![imageJRL2-4-7](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-7.jpg)

D先生 ： “さらに言うと、そもそも「あてはめ（回帰）」を目標にしたときにT法は必要なのだろうか・・・。”

QEU:FOUNDER ： “データ数が少なく、かつ項目数が多い場合でも回帰計算ができるのがT法のメリットではあります。さて、ここで**単位空間をあえてデータ群の端に配置**してみましょう。”

**（T法回帰計算でバラツキの最大データを単位空間にした場合）**

![imageJRL2-4-8](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-8.jpg)

QEU:FOUNDER ： “あえてT法(1)のSN比で回帰したんですが、T法（2）のSN比でも基本的にはバラツキの傾向は同じです。”

D先生 ： “T法(1：単位空間が中央)でも「ん？」と思いましたが、さらにT法(2：単位空間が端)になったらダメダメじゃないですか？”

QEU:FOUNDER ： “まあ、D先生はそのネガティブな偏見を一旦忘れてくださいな・・・。T法(1)のSN比とT法(2)のSN比の違いは、一見してわかる「事象」として、何をもたらすのか・・・。”


**（T法あてはめの実際）**

![imageJRL2-4-9](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-9.jpg)

**（事例）**

![imageJRL2-4-10](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-10.jpg)

QEU:FOUNDER ： “誤差分散(Ve)がSN比の計算で**マイナス側に作用**しますから、T法(1)の場合はSN比がマイナスになる項がでてきます。この場合、回帰計算から項目を排除するためにSN比を0にします。”

D先生 ： “ある意味、項目選択を自動的にしてくれるので「らくちん」ではありますね。・・・でも、T法（1）とT法（2）の差異は、どこから来るんだろうか。さらに言うと、T法(1)ではVeがなぜ必要なのか・・・。”

QEU:FOUNDER ： “**このVe項は「エルゴート性の補正」と言われています**。エルゴート性を、今回の場合で簡単に解釈すると・・・。”

### エルゴート性（今回の解釈）　：　データサンプリングにおいて空間のバラツキと時間のバラツキは等価である。

D先生 ： “つまり、我々は信号（学習）データを、ある一つのプロセスから順次サンプリングしています。すると、当然、サンプリングする時間が違いますから、データにはプロセスの時間のばらつきが追加されているはずです。そこで、SN比を計算するにあたって、予測精度を上げるために信号のバラツキからサンプリング（時間）のばらつきを引き算したい。でも、それがわからないので、代わりにエルゴート性の前提を使ってサンプリング（空間）バラツキで代用したと・・・。”

QEU:FOUNDER ： “残念ながら、Veの値は単位空間を端に配置すると大きくなるんです。さて、ここでこの動画（↓）をみてください・・・。”

[![MOVIE1](http://img.youtube.com/vi/ogt5AMj62yk/0.jpg)](http://www.youtube.com/watch?v=ogt5AMj62yk "○The News ● 失敗続きのコロナ・経済対策　迫る“カタストロフ”に私たちはどう向き合うか【金子勝、児玉龍彦、望月衣塑子、尾形聡彦】")

D先生  ： “ん！？カタストロフ？？これは不吉な言葉だなぁ・・・。”

![imageJRL2-4-11](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-11.jpg)

QEU:FOUNDER ： “カタストロフは別に特殊なモノではなくて、**自然には普通に存在します**。この大先生（↑）によると、むしろ正規分布の方が自然には存在しないと・・・。”

D先生  ： “あれ？正規分布は品質管理の基本前提じゃないですか。”

### おっさん（＠QCサークル講話）；「従業員の皆さんにはテレビを見てください。皆が同じように考えてください。」

QEU:FOUNDER ： “**自然に存在しないことを「むりやり」やった（↑）のがいままでの品質管理です**。”

![imageJRL2-4-12](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-12.jpg)

QEU:FOUNDER ： “だから、その結果として**世の中がおかしくなった**と・・・(笑)。・・・、再びカタストロフの話に戻りましょう。たとえば、以下（↓）のような状況（トポロジー）でカタストロフが起こると言われています。”

![imageJRL2-4-13](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-13.jpg)

D先生  ： “これは、どこかで見たことが・・・。”

![imageJRL2-4-14](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-14.jpg)

QEU:FOUNDER ： “例えば**鉄の焼き入れ**って、その原理がカタストロフですよ。冷却がノーズ（☆点）に当たらない速度で冷却すると、鉄は相変化によって固くなります。このように、**カタストロフは自然中によくあるモノ**なんです。そして、カタストロフの発生をT法で予測したい。D先生はこの件、どう解決しますか？”

D先生  ： “う～ん、私ならば・・・。**T法(2)で「単位空間をカタストロフ点に配置」して予測**をします。”

QEU:FOUNDER ： “ふつうはそう思いますよね・・・。小生がT法(2)に注目するのは、この**カタストロフの予測のため**です。”

D先生  ： “カタストロフ・・・。なんか風水師のアヤシイ世界だなぁ・・・。”

![imageJRL2-4-15](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-15.jpg)

QEU:FOUNDER ： “T法は、いつ、何が起こるかわからない未知のカタストロフに対しては使えないですよ。T法(2)は**「その原理がわかっている既知のカタストロフ」に対してのみ使用できる**んです。”


## ～　まとめ　～

C部長 : “・・・聞きました。やっとStable_Diffusionを始めるんですって？私は、半年前から始めています。ボクは優しい人なので、FOUNDERに**参考資料をお渡しします**。まあ・・・、がんばって・・・（笑）。”

![imageJRL2-4-16](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-16.jpg)

QEU:FOUNDER ： “・・・。なにもわからんのでよろしくご教示ください。で？どうすればいいん？”

C部長 : “参考ページに載っている傑作集の**「呪文(prompts)」を入れてみる**のが第一歩です。これなんかどうです？”

![imageJRL2-4-17](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-17.jpg)

QEU:FOUNDER ： “なんかパッとしないなぁ・・・。ちょっと違うタイプのを出してみたいです。”

C部長 : “じゃあ、コレをドン・・・。”

![imageJRL2-4-18](/2023-03-07-QEUR22_withT2S3/imageJRL2-4-18.jpg)

QEU:FOUNDER ： “ここでむさくるしいおっさんを出しても、もっとパッとせんわ・・・。”

C部長 : “各1枚しか出してませんからね。他にも、使っているモデルにも問題があるかもしれません。”

